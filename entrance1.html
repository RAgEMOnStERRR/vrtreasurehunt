<!DOCTYPE html>
<html>
  <head>
    <title>EEE Treasure Hunt</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #000;
      }
      .instructions {
        position: absolute;
        bottom: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 14px;
        z-index: 10;
        max-width: 300px;
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .click-indicator {
        position: absolute;
        bottom: 60px;
        right: 20px;
        background: rgba(255, 215, 0, 0.9);
        color: black;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 12px;
        z-index: 10;
        animation: pulse 2s infinite;
      }
      @keyframes pulse {
        0% { opacity: 0.7; }
        50% { opacity: 1; }
        100% { opacity: 0.7; }
      }
    </style>
  </head>
  <body>
    <a-scene 
      vr-mode-ui="enabled: true" 
      cursor="rayOrigin: mouse" 
      background="color: #000">
      
      <a-assets>
        <img id="skyTexture" src="entrance1.jpeg">
      </a-assets>
      
     

      <!-- CLICKABLE ARROW EAST -->
      <a-box 
        id="arrow-east" 
        class="clickable raycastable"
        position="5 1.5 0" 
        scale="2 2 2" 
        rotation="0 90 0"
        color="#FFD700"
        material="opacity: 0.8"
        sound="on: click; src: url(data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEfCEGPzPHHdyo=)"
        >
        <a-text 
          value="EAST" 
          position="0 0.8 0" 
          align="center" 
          color="white"
          scale="0.8 0.8 0.8">
        </a-text>
        <a-cone 
          position="0 0 0.6" 
          radius-bottom="0.2" 
          radius-top="0" 
          height="0.4" 
          color="red"
          rotation="0 0 -90">
        </a-cone>
      </a-box>

      <!-- CLICKABLE ARROW WEST -->
      <a-box 
        id="arrow-west" 
        class="clickable raycastable"
        position="-5 1.5 0" 
        scale="2 2 2" 
        rotation="0 -90 0"
        color="#FFD700"
        material="opacity: 0.8"
        sound="on: click; src: url(data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEfCEGPzPHHdyo=)"
        >
        <a-text 
          value="WEST" 
          position="0 0.8 0" 
          align="center" 
          color="white"
          scale="0.8 0.8 0.8">
        </a-text>
        <a-cone 
          position="0 0 0.6" 
          radius-bottom="0.2" 
          radius-top="0" 
          height="0.4" 
          color="red"
          rotation="0 0 -90">
        </a-cone>
      </a-box>

      <!-- CLICKABLE ARROW NORTH -->
      <a-box 
        id="arrow-north" 
        class="clickable raycastable"
        position="0 1.5 -5" 
        scale="2 2 2" 
        rotation="0 0 0"
        color="#FFD700"
        material="opacity: 0.8"
        sound="on: click; src: url(data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEfCEGPzPHHdyo=)"
        >
        <a-text 
          value="NORTH" 
          position="0 0.8 0" 
          align="center" 
          color="white"
          scale="0.8 0.8 0.8">
        </a-text>
        <a-cone 
          position="0 0 0.6" 
          radius-bottom="0.2" 
          radius-top="0" 
          height="0.4" 
          color="red"
          rotation="0 0 -90">
        </a-cone>
      </a-box>

      <!-- CAMERA WITH VR SUPPORT -->
      <a-entity id="rig" position="0 1.6 0">
        <a-camera 
          look-controls="enabled: true" 
          wasd-controls="enabled: true"
          cursor="objects: .raycastable">
          
          <!-- GAZE CURSOR -->
          <a-cursor
            id="cursor"
            geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
            material="color: white; shader: flat"
            position="0 0 -0.5"
            raycaster="objects: .raycastable; far: 50"
            animation__click="property: scale; startEvents: click; dur: 150; from: 1 1 1; to: 1.2 1.2 1.2"
            animation__fuse="property: scale; startEvents: fusing; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1">
          </a-cursor>
        </a-camera>
        
        <!-- VR CONTROLLERS -->
        <a-entity 
          id="leftController"
          hand-controls="hand: left; handModelStyle: lowPoly; color: #15ACCF"
          laser-controls="hand: left"
          raycaster="objects: .raycastable; far: 50; lineColor: red; lineOpacity: 0.5">
        </a-entity>
        
        <a-entity 
          id="rightController"
          hand-controls="hand: right; handModelStyle: lowPoly; color: #15ACCF" 
          laser-controls="hand: right"
          raycaster="objects: .raycastable; far: 50; lineColor: red; lineOpacity: 0.5">
        </a-entity>
      </a-entity>

      <!-- LIGHTING -->
      <a-light type="ambient" color="#404040" intensity="0.4"></a-light>
      <a-light type="directional" position="1 1 1" color="white" intensity="0.6"></a-light>
    </a-scene>

    <div class="instructions">
      <h3>Treasure Hunt Instructions</h3>
      <p>Click on arrows to navigate:</p>
      <p>• East, West, North → different pages</p>
      <p><strong>VR:</strong> Point and trigger to click</p>
      <p><strong>Desktop:</strong> Look and click</p>
    </div>

    <div class="click-indicator">
      Point at gold boxes and click/trigger!
    </div>

    <script>
      // Wait for scene to load
      document.querySelector('a-scene').addEventListener('loaded', function () {
        console.log('Scene loaded');
        
        // Add click handlers for each arrow
        const arrowEast = document.querySelector('#arrow-east');
        const arrowWest = document.querySelector('#arrow-west');
        const arrowNorth = document.querySelector('#arrow-north');
        
        if (arrowEast) {
          arrowEast.addEventListener('click', function() {
            console.log('East arrow clicked!');
            setTimeout(() => {
              window.location.href = 'flag.html';
            }, 500);
          });
          
          // VR trigger events
          arrowEast.addEventListener('triggerdown', function() {
            console.log('East arrow triggered in VR!');
            setTimeout(() => {
              window.location.href = 'flag.html';
            }, 500);
          });
        }
        
        if (arrowWest) {
          arrowWest.addEventListener('click', function() {
            console.log('West arrow clicked!');
            setTimeout(() => {
              window.location.href = 'oatjungle.html';
            }, 500);
          });
          
          // VR trigger events
          arrowWest.addEventListener('triggerdown', function() {
            console.log('West arrow triggered in VR!');
            setTimeout(() => {
              window.location.href = 'oatjungle.html';
            }, 500);
          });
        }
        
        if (arrowNorth) {
          arrowNorth.addEventListener('click', function() {
            console.log('North arrow clicked!');
            setTimeout(() => {
              window.location.href = 'between.html';
            }, 500);
          });
          
          // VR trigger events
          arrowNorth.addEventListener('triggerdown', function() {
            console.log('North arrow triggered in VR!');
            setTimeout(() => {
              window.location.href = 'between.html';
            }, 500);
          });
        }
        
        // Add hover effects
        const clickableElements = document.querySelectorAll('.clickable');
        clickableElements.forEach(function(element) {
          element.addEventListener('mouseenter', function() {
            element.setAttribute('animation', 'property: scale; to: 2.2 2.2 2.2; dur: 200');
          });
          
          element.addEventListener('mouseleave', function() {
            element.setAttribute('animation', 'property: scale; to: 2 2 2; dur: 200');
          });
        });
      });
      
      // Fallback click detection
      document.addEventListener('click', function(event) {
        const target = event.target.closest('.clickable');
        if (target) {
          console.log('Fallback click detected on:', target.id);
        }
      });
    </script>
  </body>
</html>