<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>EEE Treasure Hunt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    body { margin:0; overflow:hidden; background:#000; font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif; }
    .instructions {
      position:absolute; bottom:20px; left:20px;
      background:rgba(0,0,0,0.7); color:white;
      padding:10px 15px; border-radius:8px; max-width:300px;
      font-size:14px; backdrop-filter:blur(4px);
    }
    .click-indicator {
      position:absolute; bottom:60px; right:20px;
      background:rgba(255,215,0,0.9); color:#000;
      padding:10px 15px; border-radius:8px; font-size:12px;
      animation:pulse 2s infinite;
    }
    @keyframes pulse {0%{opacity:.7;}50%{opacity:1;}100%{opacity:.7;}}
  </style>
</head>
<body>
  <!-- ===== SCENE ===== -->
  <a-scene vr-mode-ui="enabled: true" cursor="rayOrigin: mouse">
    <a-sky src="eceparking.jpeg"></a-sky>

    <!-- WEST ARROW -->
    <a-entity id="arrow-west" class="clickable"
              position="-8 0.8 2" scale="1.2 1.2 2.2" rotation="0 -90 0">
      <a-cylinder radius="0.3" height="0.05" color="#FFD700"></a-cylinder>
      <a-ring radius-inner="0.2" radius-outer="0.3" color="#8B4513"
              rotation="-90 0 0" position="0 0.03 0"></a-ring>
      <a-box position="0 0.1 0.2" width="0.05" height="0.01" depth="0.4" color="#FF0000"></a-box>
      <a-box position="0 0.1 -0.2" width="0.05" height="0.01" depth="0.4" color="#0000FF"></a-box>
      <a-animation attribute="position" to="-4 1.5 2" dur="2000"
                   direction="alternate" repeat="indefinite"></a-animation>
    </a-entity>

    <!-- NORTH ARROW -->
    <a-entity id="arrow-north" class="clickable"
              position="0 0.8 -4" scale="1.2 1.2 1.2" rotation="0 0 0">
      <a-cylinder radius="0.3" height="0.05" color="#FFD700"></a-cylinder>
      <a-ring radius-inner="0.2" radius-outer="0.3" color="#8B4513"
              rotation="-90 0 0" position="0 0.03 0"></a-ring>
      <a-box position="0 0.1 0.2" width="0.05" height="0.01" depth="0.4" color="#FF0000"></a-box>
      <a-box position="0 0.1 -0.2" width="0.05" height="0.01" depth="0.4" color="#0000FF"></a-box>
      <a-animation attribute="position" to="0 1.5 -4" dur="2000"
                   direction="alternate" repeat="indefinite"></a-animation>
    </a-entity>

    <!-- CAMERA & CURSOR -->
    <a-camera position="0 1.6 0" wasd-controls look-controls>
      <a-cursor id="cursor"
        position="0 0 -1"
        geometry="primitive:ring; radiusInner:0.02; radiusOuter:0.03"
        material="color:white; shader:flat"
        raycaster="objects:.clickable"
        animation__click="property:scale; startEvents:click; dur:150; from:0.1 0.1 0.1; to:1 1 1"
        animation__fusing="property:scale; startEvents:fusing; dur:1500; from:1 1 1; to:0.1 0.1 0.1">
      </a-cursor>
    </a-camera>

    <!-- LIGHTS -->
    <a-light type="ambient" color="#4455AA" intensity="0.3"></a-light>
    <a-light type="directional" color="#FFFFFF" intensity="0.7" position="-1 1 1"></a-light>
  </a-scene>

  <!-- UI OVERLAYS -->
  <div class="instructions">
    <h3>Treasure Hunt</h3>
    <p>Look & click arrows to navigate:</p>
    <p>• West → EEE Way<br>• North → Chemical Path</p>
  </div>
  <div class="click-indicator">Aim at arrows & click / trigger!</div>

  <!-- ===== SCRIPT ===== -->
  <script>
    const scene = document.querySelector('a-scene');

    function goTo(url){
      // exit VR if active to allow navigation
      if (scene.is('vr-mode')) {
        scene.exitVR();
        setTimeout(()=>window.location.href = url, 600);
      } else {
        window.location.href = url;
      }
    }

    scene.addEventListener('loaded', () => {
      const links = [
        {el: '#arrow-west',  page: 'eeeway.html'},
        {el: '#arrow-north', page: 'chemical.html'}
      ];

      links.forEach(({el,page})=>{
        const target = document.querySelector(el);
        if (!target) return;

        // Desktop mouse click
        target.addEventListener('click', () => goTo(page));
        // VR controller click
        target.addEventListener('selectstart', () => goTo(page));
        // Hover animation
        target.addEventListener('mouseenter', () =>
          target.setAttribute('animation','property: scale; to:1.5 1.5 1.5; dur:200'));
        target.addEventListener('mouseleave', () =>
          target.setAttribute('animation','property: scale; to:1.2 1.2 1.2; dur:200'));
      });
    });
  </script>
</body>
</html>
