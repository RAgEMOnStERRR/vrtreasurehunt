<!DOCTYPE html>
<html>
<head>
    <title>EEE Treasure Hunt</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-html-shader@0.2.0/dist/aframe-html-shader.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
        }
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            visibility: hidden;
        }
        .popup-content {
            background: linear-gradient(135deg, #f5d76e, #d4ac0d);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            border: 5px solid #b7950b;
            animation: popIn 0.5s ease-out;
        }
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .popup-content h2 {
            color: #8b6914;
            margin-top: 0;
            font-size: 28px;
        }
        .popup-content p {
            color: #5e4a0e;
            font-size: 18px;
            line-height: 1.5;
        }
        .close-btn {
            background: #8b6914;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
            transition: background 0.3s;
        }
        .close-btn:hover {
            background: #6b4f0a;
        }
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 10;
            max-width: 300px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .title {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 24px;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>
    <div class="title">EEE Treasure Hunt Adventure</div>
    
    <a-scene>
        <!-- Sky background -->
        <a-sky src="eeeentrance.jpeg"></a-sky>
        
        <!-- Next location marker - Enhanced Compass icon in top right corner -->
        <a-entity class="clickable" position="10.5 10.5 -4" scale="1.5 1.5 1.5" link="href: scene2.html; title: Next Location">
            <!-- Compass base -->
            <a-cylinder 
                position="0 0 0" 
                radius="0.3" 
                height="0.05" 
                color="#FFD700"
                rotation="0 0 0">
            </a-cylinder>
            <!-- Compass rose -->
            <a-ring 
                position="0 0.03 0" 
                radius-inner="0.2" 
                radius-outer="0.3" 
                color="#8B4513"
                rotation="-90 0 0">
            </a-ring>
            <!-- Compass needle base -->
            <a-cylinder 
                position="0 0.05 0" 
                radius="0.05" 
                height="0.02" 
                color="#C0C0C0">
            </a-cylinder>
            <!-- North needle -->
            <a-box 
                position="0 0.1 0.2" 
                width="0.05" 
                height="0.01" 
                depth="0.4" 
                color="#FF0000">
            </a-box>
            <!-- South needle -->
            <a-box 
                position="0 0.1 -0.2" 
                width="0.05" 
                height="0.01" 
                depth="0.4" 
                color="#0000FF">
            </a-box>
            <!-- Direction markers -->
            <a-text 
                value="N" 
                position="0 0.15 0.25" 
                align="center" 
                color="#FF0000" 
                scale="2 2 2">
            </a-text>
            <a-text 
                value="S" 
                position="0 0.15 -0.25" 
                align="center" 
                color="#0000FF" 
                scale="2 2 2">
            </a-text>
            <!-- Glowing effect -->
            <a-light type="point" intensity="0.5" color="#FFD700" position="0 0.2 0"></a-light>
            <!-- Rotation animation -->
            <a-animation 
                attribute="rotation" 
                to="0 360 0" 
                dur="8000" 
                repeat="indefinite">
            </a-animation>
            <!-- Floating animation -->
            <a-animation 
                attribute="position" 
                to="4.5 3.7 -5" 
                dur="2000" 
                direction="alternate" 
                repeat="indefinite">
            </a-animation>
        </a-entity>
        
        <!-- Map marker - Enhanced Map icon in top left corner -->
        <a-entity class="clickable" position="-7.5 15.5 -4" scale="1.5 1.5 1.5" link="href: map.html; title: View Map">
            <!-- Map scroll base -->
            <a-cylinder 
                position="0 0 0" 
                radius="0.3" 
                height="0.05" 
                color="#8B4513"
                rotation="0 0 0">
            </a-cylinder>
            <!-- Map paper -->
            <a-circle 
                position="0 0.03 0" 
                radius="0.25" 
                color="#F5F5DC"
                rotation="-90 0 0">
            </a-circle>
            <!-- Map details -->
            <a-plane 
                position="-0.1 0.035 0.1" 
                width="0.15" 
                height="0.1" 
                color="#FF6347"
                rotation="-90 0 0">
            </a-plane>
            <a-plane 
                position="0.1 0.035 -0.1" 
                width="0.1" 
                height="0.15" 
                color="#4682B4"
                rotation="-90 0 0">
            </a-plane>
            <a-circle 
                position="0.05 0.035 0.08" 
                radius="0.03" 
                color="#32CD32"
                rotation="-90 0 0">
            </a-circle>
            <!-- "X" marks the spot -->
            <a-entity position="0 0.035 0" rotation="-90 0 0">
                <a-plane position="-0.05 0 0.05" width="0.02" height="0.1" color="#FF0000" rotation="0 0 45"></a-plane>
                <a-plane position="0.05 0 -0.05" width="0.02" height="0.1" color="#FF0000" rotation="0 0 45"></a-plane>
            </a-entity>
            <!-- Glowing effect -->
            <a-light type="point" intensity="0.5" color="#8B4513" position="0 0.2 0"></a-light>
            <!-- Floating animation -->
            <a-animation 
                attribute="position" 
                to="-4.5 3.7 -5" 
                dur="2000" 
                direction="alternate" 
                repeat="indefinite">
            </a-animation>
            <!-- Slight rotation animation -->
            <a-animation 
                attribute="rotation" 
                to="0 0 5" 
                dur="3000" 
                direction="alternate" 
                repeat="indefinite">
            </a-animation>
        </a-entity>
        
        <!-- Hidden treasure - Enhanced Chest icon -->
        <a-entity id="treasure" class="clickable treasure" position="0 0.5 -4" scale="1 1 1">
            <!-- Treasure chest base -->
            <a-box 
                position="0 -0.15 0" 
                width="0.8" 
                height="0.3" 
                depth="0.5" 
                color="#8B4513">
            </a-box>
            <!-- Treasure chest lid -->
            <a-box 
                position="0 0.1 0" 
                width="0.8" 
                height="0.05" 
                depth="0.5" 
                color="#A0522D" 
                rotation="-15 0 0">
            </a-box>
            <!-- Treasure chest lock -->
            <a-cylinder 
                position="0 0.05 0.25" 
                radius="0.04" 
                height="0.05" 
                color="#FFD700">
            </a-cylinder>
            <!-- Treasure inside (slightly visible) -->
            <a-box 
                position="0 -0.05 0" 
                width="0.6" 
                height="0.1" 
                depth="0.3" 
                color="#FFD700">
            </a-box>
            <!-- Glowing particles around treasure -->
            <a-entity particle-system="preset: star; color: #FFD700, #FFA500; particleCount: 30"></a-entity>
            <!-- Subtle rotation animation -->
            <a-animation 
                attribute="rotation" 
                to="0 360 0" 
                dur="20000" 
                repeat="indefinite">
            </a-animation>
            <!-- Floating animation -->
            <a-animation 
                attribute="position" 
                to="0 0.7 -4" 
                dur="3000" 
                direction="alternate" 
                repeat="indefinite">
            </a-animation>
            <!-- Glowing light -->
            <a-light type="point" intensity="1.0" color="#FFD700" position="0 0.3 0" distance="5"></a-light>
        </a-entity>
        
        <!-- Additional decorative elements for immersion -->
        <a-entity position="3 0 -6">
            <a-box position="0 1 0" width="0.5" height="2" depth="0.5" color="#654321"></a-box>
            <a-box position="0 2.5 0" width="2" height="0.1" depth="2" color="#8B4513"></a-box>
            <a-text value="EEE" position="0 2.6 0" align="center" color="#FFD700" scale="3 3 3"></a-text>
        </a-entity>
        
        <!-- Player with VR controls -->
        <a-entity>
            <a-camera position="0 1.6 0"></a-camera>
            <a-entity laser-controls="hand: right" raycaster="objects: .clickable"></a-entity>
            <a-entity laser-controls="hand: left" raycaster="objects: .clickable"></a-entity>
        </a-entity>
        
        <!-- Ambient lighting -->
        <a-light type="ambient" color="#4455AA" intensity="0.3"></a-light>
        <a-light type="directional" color="#FFFFFF" intensity="0.7" position="-1 1 1"></a-light>
    </a-scene>
    
    <!-- Treasure found popup -->
    <div id="treasurePopup" class="popup-overlay">
        <div class="popup-content">
            <h2>🎉 Treasure Found! 🎉</h2>
            <p>Congratulations! You've discovered the hidden treasure near the EEE building!</p>
            <p>Your next clue is: <strong>"Look for the tallest structure on campus"</strong></p>
            <p>You've earned 50 treasure points!</p>
            <button class="close-btn" onclick="closePopup()">Continue Adventure</button>
        </div>
    </div>
    
    <!-- Instructions -->
    <div class="instructions">
        <h3>Treasure Hunt Instructions</h3>
        <p>Use VR controllers to interact with objects:</p>
        <p>• Compass icon - Go to next location</p>
        <p>• Map icon - View the treasure map</p>
        <p>• Find the hidden treasure chest!</p>
    </div>

    <script>
        // Wait for A-Frame to load
        document.querySelector('a-scene').addEventListener('loaded', function() {
            // Add click event to treasure
            const treasure = document.getElementById('treasure');
            treasure.addEventListener('click', function() {
                // Show popup
                document.getElementById('treasurePopup').style.visibility = 'visible';
                
                // Add explosion effect
                const explosion = document.createElement('a-entity');
                explosion.setAttribute('position', treasure.getAttribute('position'));
                explosion.setAttribute('particle-system', 'preset: explosion; color: #FFD700, #FFA500, #FF4500; particleCount: 150');
                document.querySelector('a-scene').appendChild(explosion);
                
                // Add sound effect (if available)
                try {
                    const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQAAAAAAA');
                    audio.play();
                } catch(e) {
                    // Sound not critical, continue without it
                }
                
                // Remove explosion after 2 seconds
                setTimeout(function() {
                    document.querySelector('a-scene').removeChild(explosion);
                }, 2000);
            });
        });
        
        // Function to close popup
        function closePopup() {
            document.getElementById('treasurePopup').style.visibility = 'hidden';
        }
    </script>
</body>
</html>
